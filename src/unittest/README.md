# Mocktender Unit Testing Demo
### Group number: L3-G8

To test that each individual hardware and software component works as expected, the following hardware and software unit tests will be performed. A copy of the deployment diagram showcasing the system under test is below:
![UML Deployment Diagram](/diagrams/DeploymentDiagram.png)

## Hardware Unit Testing
| **Hardware Device**                          | **Tester** | **Device Description**                                                                                                                                                                                                                                       | **Test Description**                                                                                                                                                                                                                                  | **Expected Test** **Results**                                                                                                                                                                                                                              |
| -------------------------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Ultrasonic Sensor (Liquid level sensing)** | Matt       | The ultrasonic sensor will be used to track the water level in the 3 liquid tanks in the Mocktender system. The distance from the sensor to the surface of the water is used to calculate the current volume of the liquid in the container.                 | To test the liquid level system is working correct, water will be added to the liquid container in increments of 2cm measured using a ruler. The Ultrasonic sensor will measure the distance to the surface of the water                              | The distance from the sensor to the surface of the water should  be within 5mm of the expected level based on the amount of water added to the container.                                                                                                  |
| **Peristaltic Pump & DC Motor**              | Ethan      | The liquid pump will be used to dispense a drink. Based on the recipe provided by the user, each pump will be run for a specified amount of time so that the correct amount of each liquid is pumped (mixed) into the dispensed drink.                       | To test the functionality of the pump, the GPIO pin connected to the motor controller will be pulsed with PWM signals. The amount of liquid that is pumped over a time period will be measured.                                                       | The pump will pump water for 30 seconds in each trial, and approximately 50mL should be pumped into the measurement contzainer.                                                                                                                            |
| **LCD Display**                              | Duncan     | The LCD display will display machine operation information such as what it is dispensing and any errors.                                                                                                                                                     | To test the LCD output, messages will be displayed on the LCD.                                                                                                                                                                                        | The LCD display should display the correct messages.                                                                                                                                                                                                       |
| **Simulation LEDs**                          | Duncan     | The simulation LEDs will light up when the motors on the simulation device are ON. Based on the recipe provided by the user, each LED will turn on for a specified amount of time so that it can be demonstrated that the simulation is working as expected. | To test that the Simulation LEDs accurately turn ON when the motors should be running, the LEDs will be pulsed with PWM similarly to the Peristaltic Pump & DC Motor test. This is since the simulation LEDs are simulating the pump and motor system | Like the pump and motor test, the user should see the LEDs gradually get brighter as the PWM is increased until they reach their max brightness. They will maintain the maximum brightness for 2 seconds before gradually slowing down until they are OFF. |

## Software Unit Testing
| **Software**                       | **Tester** | **Software Description**                                                                                                                                                                                         | **Test Description**                                                                                                                                                                                                                           | **Expected Test Results**                                                                                                                                                                                        |
| ---------------------------------- | ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Liquid Level Monitoring System** | Matt       | The liquid level monitoring system will take the sensor data and calculate the volume of liquid currently in the container in real time. It sends this information to the user interface to display to the user. | To test the conversion from distance to liquid level, increments of distances of 0.1 will be converted to a volume and rounded to the nearest volume amount in the software. There will also be tests for error values (negative and too high) | The volume that the software returns should be equal to the expected closest multiple of 80 to the distance. If the distance is negative or bigger than the maximum size (640mL), it should give a volume of -1. |
| **Motor Control System**           | Ethan      | The motor control system takes the amount of liquid needed for the selected recipe and converts it into the time that the motor needs to run based on the calculated flow rate.                                  | To test that the motor control system can convert the recipe into the correct times for each pump to pump the specified amount of liquid.                                                                                                      | The time that the system “turns on the motor” should match the expected time based on the recipe and flow rate.                                                                                                  |
| **Frontend Web Interface**         | Duncan     | The frontend web interface allows a user to view liquid levels, create recipes, and dispense a drink. It also allows an admin login to give administrative access to locking a machine and                       | The interface will be tested by rendering GUI design pages and ensuring that they render and display information as expected.                                                                                                                  | When a button is pressed, it should redirect to the correct page and display the expected info.                                                                                                                  |
| **Local PostgreSQL Database**      | Duncan     | The local SQLite database is used to store machine specific data for display on the web interface.                                                                                                               | The database will be tested using a test script which creates the expected tables for the local system database.                                                                                                                               | The data stored in the PostgreSQL database after the script is run will be pulled and compared with the expected contents of the database.                                                                       |
